"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[623],{1623:(X,A,r)=>{r.r(A),r.d(A,{UserManagementModule:()=>Q});var N=r(4755),o=r(9401),h=r(3247),U=r(9736),t=r(2223),I=r(9168),E=r(3144);let v=(()=>{class e{constructor(n){this.http=n}login(n,s){return this.http.post(I.t+"/users/login",{username:n,password:s})}signup(n,s){return this.http.post(I.t+"/users/signup",{username:n,password:s})}}return e.\u0275fac=function(n){return new(n||e)(t.LFG(E.eN))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var g=r(1662),a=r(8784),u=r(6012),S=r(430),Z=r(8097),p=r(9114),y=r(1728);let q=(()=>{class e{constructor(n,s,m,f){this.userManagementService=n,this.formBuilder=s,this.router=m,this.store=f,this.errorMessage="",this.isLoggedIn$=this.store.select(U.Qb),this.username$=this.store.select(U.zD),this.error$=this.store.select(U.zh),this.loginForm=this.formBuilder.group({username:["",o.kI.required],password:["",o.kI.required]})}ngOnInit(){}onLogin(n){if(n.invalid)throw new Error("All fields are required.");this.store.dispatch((0,h.x4)({username:n.value.username,password:n.value.password}))}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(v),t.Y36(o.qu),t.Y36(g.F0),t.Y36(a.yh))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-login"]],decls:26,vars:1,consts:[[1,"card-container"],[1,"example-card"],[2,"display","flex","flex-direction","column","justify-content","center","align-items","center"],[1,"text-center"],[1,"full-width","text-center"],[3,"formGroup","submit"],[1,"form-input"],["matInput","","value","","formControlName","username","required",""],["matInput","","type","password","value","","formControlName","password","required",""],["type","submit","mat-raised-button","","color","primary"],[1,"signup-link-container"],["routerLink","/user-management/signup"]],template:function(n,s){1&n&&(t.TgZ(0,"div",0)(1,"mat-card",1)(2,"div",2)(3,"mat-card-header",3)(4,"mat-card-title"),t._uU(5,"eLearning"),t.qZA(),t.TgZ(6,"mat-card-subtitle"),t._uU(7,"Login into eLearning"),t.qZA()(),t.TgZ(8,"mat-card-content",4)(9,"form",5),t.NdJ("submit",function(){return s.onLogin(s.loginForm)}),t.TgZ(10,"mat-form-field",6)(11,"mat-label"),t._uU(12,"Username"),t.qZA(),t._UZ(13,"input",7),t.qZA(),t.TgZ(14,"mat-form-field",6)(15,"mat-label"),t._uU(16,"Password"),t.qZA(),t._UZ(17,"input",8),t.qZA(),t.TgZ(18,"div",3)(19,"button",9)(20,"mat-icon"),t._uU(21,"login"),t.qZA(),t._uU(22," Login "),t.qZA()()()()(),t.TgZ(23,"div",10)(24,"a",11),t._uU(25,"Don't have an account? Signup"),t.qZA()()()()),2&n&&(t.xp6(9),t.Q6J("formGroup",s.loginForm))},dependencies:[g.rH,u.a8,u.dn,u.dk,u.$j,u.n5,S.Hw,Z.Nt,p.KE,p.hX,y.lW,o._Y,o.Fj,o.JJ,o.JL,o.Q7,o.sg,o.u],styles:[".example-card[_ngcontent-%COMP%]{width:500px}.card-container[_ngcontent-%COMP%]{margin-top:5rem;display:flex;justify-content:center;align-items:center}.signup-link-container[_ngcontent-%COMP%]{text-align:right;float:right;padding:5px 10px}"]}),e})();var c=(()=>((c=c||{}).SIGNUP="signup",c.SIGNUP_SUCCESS="signupSuccess",c.SIGNUP_FAILURE="signupFailure",c))();const L=(0,a.PH)(c.SIGNUP,(0,a.Ky)()),M=(0,a.PH)(c.SIGNUP_SUCCESS,(0,a.Ky)()),F=(0,a.PH)(c.SIGNUP_FAILURE,(0,a.Ky)());let Y=(()=>{class e{constructor(n,s,m){this.store=n,this.formBuilder=s,this.userManagementSevice=m,this.signupForm=this.formBuilder.group({username:["",o.kI.required],password:["",o.kI.required],confirmPassword:["",o.kI.required]})}ngOnInit(){}onSignup(n){if(n.invalid)throw new Error("All fields are required.");if(n.value.password!==n.value.confirmPassword)throw new Error("Confirm password doesn't match.");this.store.dispatch(L({username:n.value.username,password:n.value.password})),this.signupForm.reset()}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(a.yh),t.Y36(o.qu),t.Y36(v))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-signup"]],decls:30,vars:1,consts:[[1,"card-container"],[1,"example-card"],[2,"display","flex","flex-direction","column","justify-content","center","align-items","center"],[1,"text-center"],[1,"full-width","text-center"],[3,"formGroup","submit"],[1,"form-input"],["matInput","","value","","formControlName","username","required",""],["matInput","","type","password","value","","formControlName","password","required",""],["matInput","","type","password","value","","formControlName","confirmPassword","required",""],["type","submit","mat-raised-button","","color","primary"],[1,"signin-link-container"],["routerLink","/"]],template:function(n,s){1&n&&(t.TgZ(0,"div",0)(1,"mat-card",1)(2,"div",2)(3,"mat-card-header",3)(4,"mat-card-title"),t._uU(5,"eLearning"),t.qZA(),t.TgZ(6,"mat-card-subtitle"),t._uU(7,"Signup into eLearning"),t.qZA()(),t.TgZ(8,"mat-card-content",4)(9,"form",5),t.NdJ("submit",function(){return s.onSignup(s.signupForm)}),t.TgZ(10,"mat-form-field",6)(11,"mat-label"),t._uU(12,"Username"),t.qZA(),t._UZ(13,"input",7),t.qZA(),t.TgZ(14,"mat-form-field",6)(15,"mat-label"),t._uU(16,"Password"),t.qZA(),t._UZ(17,"input",8),t.qZA(),t.TgZ(18,"mat-form-field",6)(19,"mat-label"),t._uU(20,"Confirm Password"),t.qZA(),t._UZ(21,"input",9),t.qZA(),t.TgZ(22,"div",3)(23,"button",10)(24,"mat-icon"),t._uU(25,"person_add"),t.qZA(),t._uU(26," Signup "),t.qZA()()()()(),t.TgZ(27,"div",11)(28,"a",12),t._uU(29,"Already have an account? Login"),t.qZA()()()()),2&n&&(t.xp6(9),t.Q6J("formGroup",s.signupForm))},dependencies:[g.rH,u.a8,u.dn,u.dk,u.$j,u.n5,S.Hw,Z.Nt,p.KE,p.hX,y.lW,o._Y,o.Fj,o.JJ,o.JL,o.Q7,o.sg,o.u],styles:[".example-card[_ngcontent-%COMP%]{width:500px}.card-container[_ngcontent-%COMP%]{margin-top:5rem;display:flex;justify-content:center;align-items:center}.signin-link-container[_ngcontent-%COMP%]{text-align:right;float:right;padding:5px 10px}"]}),e})();var J=r(5815),$=r(1377);const x=(0,a.Lq)({userId:null,error:null},(0,a.on)(L,e=>({...e,userId:null,error:null})),(0,a.on)(M,(e,{userId:i})=>({...e,userId:i,error:null})),(0,a.on)(F,(e,{error:i})=>({...e,userId:null,error:i})));var d=r(826),P=r(5577),T=r(4004),w=r(262),G=r(9646);let z=(()=>{class e{constructor(n,s,m){this.router=n,this.actions$=s,this.userManagementService=m,this.login$=(0,d.GW)(()=>this.actions$.pipe((0,d.l4)(h.x4),(0,P.z)(({username:f,password:C})=>this.userManagementService.login(f,C).pipe((0,T.U)(l=>(this.router.navigate(["/"]),(0,h.he)({username:l.user.username,userId:l.user._id,userRole:l.user.role,token:l.token}))),(0,w.K)(l=>(0,G.of)((0,h.UR)({error:l.error.error})))))))}}return e.\u0275fac=function(n){return new(n||e)(t.LFG(g.F0),t.LFG(d.eX),t.LFG(v))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac}),e})();var O=r(7608);let H=(()=>{class e{constructor(n,s,m){this.actions$=n,this.dialogService=s,this.userManagementService=m,this.signup$=(0,d.GW)(()=>this.actions$.pipe((0,d.l4)(L),(0,P.z)(({username:f,password:C})=>this.userManagementService.signup(f,C).pipe((0,T.U)(l=>(this.dialogService.showError("User created","User created successfully."),M({userId:l.user._id}))),(0,w.K)(l=>(0,G.of)(F({error:l.message})))))))}}return e.\u0275fac=function(n){return new(n||e)(t.LFG(d.eX),t.LFG(O.x),t.LFG(v))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac}),e})();const K=[{path:"",redirectTo:"login",pathMatch:"full"},{path:"login",component:q},{path:"signup",component:Y}];let Q=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[N.ez,g.Bz.forChild(K),u.QW,S.Ps,Z.c,y.ot,J.N6,p.lN,o.UX,a.Aw.forFeature("loginState",$.t),a.Aw.forFeature("signupState",x),d.sQ.forFeature([z,H])]}),e})()}}]);