"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[623],{1623:(X,I,r)=>{r.r(I),r.d(I,{UserManagementModule:()=>Q});var N=r(4755),o=r(9401),p=r(3247),h=r(9736),t=r(2223),a=r(8784),f=r(1662),l=r(6012),v=r(430),U=r(8097),g=r(9114),S=r(1728);let E=(()=>{class e{constructor(n,s){this.formBuilder=n,this.store=s,this.errorMessage="",this.isLoggedIn$=this.store.select(h.Qb),this.username$=this.store.select(h.zD),this.error$=this.store.select(h.zh),this.loginForm=this.formBuilder.group({username:["",o.kI.required],password:["",o.kI.required]})}ngOnInit(){}onLogin(n){if(n.invalid)throw new Error("All fields are required.");this.store.dispatch((0,p.x4)({username:n.value.username,password:n.value.password}))}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(o.qu),t.Y36(a.yh))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-login"]],decls:26,vars:1,consts:[[1,"card-container"],[1,"example-card"],[2,"display","flex","flex-direction","column","justify-content","center","align-items","center"],[1,"text-center"],[1,"full-width","text-center"],[3,"formGroup","submit"],[1,"form-input"],["matInput","","value","","formControlName","username","required",""],["matInput","","type","password","value","","formControlName","password","required",""],["type","submit","mat-raised-button","","color","primary"],[1,"signup-link-container"],["routerLink","/user-management/signup"]],template:function(n,s){1&n&&(t.TgZ(0,"div",0)(1,"mat-card",1)(2,"div",2)(3,"mat-card-header",3)(4,"mat-card-title"),t._uU(5,"eLearning"),t.qZA(),t.TgZ(6,"mat-card-subtitle"),t._uU(7,"Login into eLearning"),t.qZA()(),t.TgZ(8,"mat-card-content",4)(9,"form",5),t.NdJ("submit",function(){return s.onLogin(s.loginForm)}),t.TgZ(10,"mat-form-field",6)(11,"mat-label"),t._uU(12,"Username"),t.qZA(),t._UZ(13,"input",7),t.qZA(),t.TgZ(14,"mat-form-field",6)(15,"mat-label"),t._uU(16,"Password"),t.qZA(),t._UZ(17,"input",8),t.qZA(),t.TgZ(18,"div",3)(19,"button",9)(20,"mat-icon"),t._uU(21,"login"),t.qZA(),t._uU(22," Login "),t.qZA()()()()(),t.TgZ(23,"div",10)(24,"a",11),t._uU(25,"Don't have an account? Signup"),t.qZA()()()()),2&n&&(t.xp6(9),t.Q6J("formGroup",s.loginForm))},dependencies:[f.rH,l.a8,l.dn,l.dk,l.$j,l.n5,v.Hw,U.Nt,g.KE,g.hX,S.lW,o._Y,o.Fj,o.JJ,o.JL,o.Q7,o.sg,o.u],styles:[".example-card[_ngcontent-%COMP%]{width:500px}.card-container[_ngcontent-%COMP%]{margin-top:5rem;display:flex;justify-content:center;align-items:center}.signup-link-container[_ngcontent-%COMP%]{text-align:right;float:right;padding:5px 10px}"]}),e})();var c=(()=>((c=c||{}).SIGNUP="signup",c.SIGNUP_SUCCESS="signupSuccess",c.SIGNUP_FAILURE="signupFailure",c))();const Z=(0,a.PH)(c.SIGNUP,(0,a.Ky)()),A=(0,a.PH)(c.SIGNUP_SUCCESS,(0,a.Ky)()),M=(0,a.PH)(c.SIGNUP_FAILURE,(0,a.Ky)());var x=r(9168),q=r(3144);let y=(()=>{class e{constructor(n){this.http=n}login(n,s){return this.http.post(x.t+"/users/login",{username:n,password:s})}signup(n,s){return this.http.post(x.t+"/users/signup",{username:n,password:s})}}return e.\u0275fac=function(n){return new(n||e)(t.LFG(q.eN))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),J=(()=>{class e{constructor(n,s,d){this.store=n,this.formBuilder=s,this.userManagementSevice=d,this.signupForm=this.formBuilder.group({username:["",o.kI.required],password:["",o.kI.required],confirmPassword:["",o.kI.required]})}ngOnInit(){}onSignup(n){if(n.invalid)throw new Error("All fields are required.");if(n.value.password!==n.value.confirmPassword)throw new Error("Confirm password doesn't match.");this.store.dispatch(Z({username:n.value.username,password:n.value.password})),this.signupForm.reset()}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(a.yh),t.Y36(o.qu),t.Y36(y))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-signup"]],decls:30,vars:1,consts:[[1,"card-container"],[1,"example-card"],[2,"display","flex","flex-direction","column","justify-content","center","align-items","center"],[1,"text-center"],[1,"full-width","text-center"],[3,"formGroup","submit"],[1,"form-input"],["matInput","","value","","formControlName","username","required",""],["matInput","","type","password","value","","formControlName","password","required",""],["matInput","","type","password","value","","formControlName","confirmPassword","required",""],["type","submit","mat-raised-button","","color","primary"],[1,"signin-link-container"],["routerLink","/"]],template:function(n,s){1&n&&(t.TgZ(0,"div",0)(1,"mat-card",1)(2,"div",2)(3,"mat-card-header",3)(4,"mat-card-title"),t._uU(5,"eLearning"),t.qZA(),t.TgZ(6,"mat-card-subtitle"),t._uU(7,"Signup into eLearning"),t.qZA()(),t.TgZ(8,"mat-card-content",4)(9,"form",5),t.NdJ("submit",function(){return s.onSignup(s.signupForm)}),t.TgZ(10,"mat-form-field",6)(11,"mat-label"),t._uU(12,"Username"),t.qZA(),t._UZ(13,"input",7),t.qZA(),t.TgZ(14,"mat-form-field",6)(15,"mat-label"),t._uU(16,"Password"),t.qZA(),t._UZ(17,"input",8),t.qZA(),t.TgZ(18,"mat-form-field",6)(19,"mat-label"),t._uU(20,"Confirm Password"),t.qZA(),t._UZ(21,"input",9),t.qZA(),t.TgZ(22,"div",3)(23,"button",10)(24,"mat-icon"),t._uU(25,"person_add"),t.qZA(),t._uU(26," Signup "),t.qZA()()()()(),t.TgZ(27,"div",11)(28,"a",12),t._uU(29,"Already have an account? Login"),t.qZA()()()()),2&n&&(t.xp6(9),t.Q6J("formGroup",s.signupForm))},dependencies:[f.rH,l.a8,l.dn,l.dk,l.$j,l.n5,v.Hw,U.Nt,g.KE,g.hX,S.lW,o._Y,o.Fj,o.JJ,o.JL,o.Q7,o.sg,o.u],styles:[".example-card[_ngcontent-%COMP%]{width:500px}.card-container[_ngcontent-%COMP%]{margin-top:5rem;display:flex;justify-content:center;align-items:center}.signin-link-container[_ngcontent-%COMP%]{text-align:right;float:right;padding:5px 10px}"]}),e})();var $=r(5815),Y=r(1377);const F=(0,a.Lq)({userId:null,error:null},(0,a.on)(Z,e=>({...e,userId:null,error:null})),(0,a.on)(A,(e,{userId:i})=>({...e,userId:i,error:null})),(0,a.on)(M,(e,{error:i})=>({...e,userId:null,error:i})));var m=r(826),P=r(5577),T=r(4004),w=r(262),G=r(9646);let z=(()=>{class e{constructor(n,s,d){this.router=n,this.actions$=s,this.userManagementService=d,this.login$=(0,m.GW)(()=>this.actions$.pipe((0,m.l4)(p.x4),(0,P.z)(({username:L,password:C})=>this.userManagementService.login(L,C).pipe((0,T.U)(u=>(localStorage.setItem("userId",u.user._id),localStorage.setItem("token",u.token),this.router.navigate(["/"]),(0,p.he)({username:u.user.username,userId:u.user._id,userRole:u.user.role,token:u.token}))),(0,w.K)(u=>(0,G.of)((0,p.UR)({error:u.error.error})))))))}}return e.\u0275fac=function(n){return new(n||e)(t.LFG(f.F0),t.LFG(m.eX),t.LFG(y))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac}),e})();var O=r(7608);let H=(()=>{class e{constructor(n,s,d){this.actions$=n,this.dialogService=s,this.userManagementService=d,this.signup$=(0,m.GW)(()=>this.actions$.pipe((0,m.l4)(Z),(0,P.z)(({username:L,password:C})=>this.userManagementService.signup(L,C).pipe((0,T.U)(u=>(this.dialogService.showDialog("User created","User created successfully."),A({userId:u.user._id}))),(0,w.K)(u=>(0,G.of)(M({error:u.message})))))))}}return e.\u0275fac=function(n){return new(n||e)(t.LFG(m.eX),t.LFG(O.x),t.LFG(y))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac}),e})();const K=[{path:"",redirectTo:"login",pathMatch:"full"},{path:"login",component:E},{path:"signup",component:J}];let Q=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[N.ez,f.Bz.forChild(K),l.QW,v.Ps,U.c,S.ot,$.N6,g.lN,o.UX,a.Aw.forFeature("loginState",Y.t),a.Aw.forFeature("signupState",F),m.sQ.forFeature([z,H])]}),e})()}}]);