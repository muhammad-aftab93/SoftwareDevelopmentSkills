"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[24],{6024:(Q,C,r)=>{r.r(C),r.d(C,{UserManagementModule:()=>K});var w=r(4755),o=r(9401),v=r(3247),S=r(9736),t=r(2223);const M="https://e-learning-app.azurewebsites.net/api";var q=r(3144);let U=(()=>{class e{constructor(n){this.http=n}login(n,i){return this.http.post(M+"/users/login",{username:n,password:i})}signup(n,i){return this.http.post(M+"/users/signup",{username:n,password:i})}}return e.\u0275fac=function(n){return new(n||e)(t.LFG(q.eN))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var g=r(1662),a=r(8784),u=r(6012),Z=r(430),y=r(8097),p=r(1511),L=r(1728);let E=(()=>{class e{constructor(n,i,c,f){this.userManagementService=n,this.formBuilder=i,this.router=c,this.store=f,this.errorMessage="",this.isLoggedIn$=this.store.select(S.Qb),this.username$=this.store.select(S.zD),this.error$=this.store.select(S.zh),this.loginForm=this.formBuilder.group({username:["",o.kI.required],password:["",o.kI.required]})}ngOnInit(){}onLogin(n){n.invalid?this.errorMessage="All fields are required.":this.store.dispatch((0,v.x4)({username:n.value.username,password:n.value.password}))}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(U),t.Y36(o.qu),t.Y36(g.F0),t.Y36(a.yh))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-login"]],decls:26,vars:1,consts:[[1,"card-container"],[1,"example-card"],[2,"display","flex","flex-direction","column","justify-content","center","align-items","center"],[1,"text-center"],[1,"full-width","text-center"],[3,"formGroup","submit"],[1,"form-input"],["matInput","","value","","formControlName","username","required",""],["matInput","","type","password","value","","formControlName","password","required",""],["type","submit","mat-raised-button","","color","primary"],[1,"signup-link-container"],["routerLink","/user-management/signup"]],template:function(n,i){1&n&&(t.TgZ(0,"div",0)(1,"mat-card",1)(2,"div",2)(3,"mat-card-header",3)(4,"mat-card-title"),t._uU(5,"eLearning"),t.qZA(),t.TgZ(6,"mat-card-subtitle"),t._uU(7,"Login into eLearning"),t.qZA()(),t.TgZ(8,"mat-card-content",4)(9,"form",5),t.NdJ("submit",function(){return i.onLogin(i.loginForm)}),t.TgZ(10,"mat-form-field",6)(11,"mat-label"),t._uU(12,"Username"),t.qZA(),t._UZ(13,"input",7),t.qZA(),t.TgZ(14,"mat-form-field",6)(15,"mat-label"),t._uU(16,"Password"),t.qZA(),t._UZ(17,"input",8),t.qZA(),t.TgZ(18,"div",3)(19,"button",9)(20,"mat-icon"),t._uU(21,"login"),t.qZA(),t._uU(22," Login "),t.qZA()()()()(),t.TgZ(23,"div",10)(24,"a",11),t._uU(25,"Don't have an account? Signup"),t.qZA()()()()),2&n&&(t.xp6(9),t.Q6J("formGroup",i.loginForm))},dependencies:[g.rH,u.a8,u.dn,u.dk,u.$j,u.n5,Z.Hw,y.Nt,p.KE,p.hX,L.lW,o._Y,o.Fj,o.JJ,o.JL,o.Q7,o.sg,o.u],styles:[".example-card[_ngcontent-%COMP%]{width:500px}.card-container[_ngcontent-%COMP%]{margin-top:5rem;display:flex;justify-content:center;align-items:center}.signup-link-container[_ngcontent-%COMP%]{text-align:right;float:right;padding:5px 10px}"]}),e})();var l=(()=>((l=l||{}).SIGNUP="signup",l.SIGNUP_SUCCESS="signupSuccess",l.SIGNUP_FAILURE="signupFailure",l))();const A=(0,a.PH)(l.SIGNUP,(0,a.Ky)()),I=(0,a.PH)(l.SIGNUP_SUCCESS,(0,a.Ky)()),x=(0,a.PH)(l.SIGNUP_FAILURE,(0,a.Ky)());let Y=(()=>{class e{constructor(n,i,c){this.store=n,this.formBuilder=i,this.userManagementSevice=c,this.errorMessage="",this.signupForm=this.formBuilder.group({username:["",o.kI.required],password:["",o.kI.required],confirmPassword:["",o.kI.required]})}ngOnInit(){}onSignup(n){n.invalid?this.errorMessage="All fields are required.":n.value.password===n.value.confirmPassword?this.store.dispatch(A({username:n.value.username,password:n.value.password})):this.errorMessage="Confirm password doesn't match."}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(a.yh),t.Y36(o.qu),t.Y36(U))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-signup"]],decls:30,vars:1,consts:[[1,"card-container"],[1,"example-card"],[2,"display","flex","flex-direction","column","justify-content","center","align-items","center"],[1,"text-center"],[1,"full-width","text-center"],[3,"formGroup","submit"],[1,"form-input"],["matInput","","value","","formControlName","username","required",""],["matInput","","type","password","value","","formControlName","password","required",""],["matInput","","type","password","value","","formControlName","confirmPassword","required",""],["type","submit","mat-raised-button","","color","primary"],[1,"signin-link-container"],["routerLink","/"]],template:function(n,i){1&n&&(t.TgZ(0,"div",0)(1,"mat-card",1)(2,"div",2)(3,"mat-card-header",3)(4,"mat-card-title"),t._uU(5,"eLearning"),t.qZA(),t.TgZ(6,"mat-card-subtitle"),t._uU(7,"Signup into eLearning"),t.qZA()(),t.TgZ(8,"mat-card-content",4)(9,"form",5),t.NdJ("submit",function(){return i.onSignup(i.signupForm)}),t.TgZ(10,"mat-form-field",6)(11,"mat-label"),t._uU(12,"Username"),t.qZA(),t._UZ(13,"input",7),t.qZA(),t.TgZ(14,"mat-form-field",6)(15,"mat-label"),t._uU(16,"Password"),t.qZA(),t._UZ(17,"input",8),t.qZA(),t.TgZ(18,"mat-form-field",6)(19,"mat-label"),t._uU(20,"Confirm Password"),t.qZA(),t._UZ(21,"input",9),t.qZA(),t.TgZ(22,"div",3)(23,"button",10)(24,"mat-icon"),t._uU(25,"person_add"),t.qZA(),t._uU(26," Signup "),t.qZA()()()()(),t.TgZ(27,"div",11)(28,"a",12),t._uU(29,"Already have an account? Login"),t.qZA()()()()),2&n&&(t.xp6(9),t.Q6J("formGroup",i.signupForm))},dependencies:[g.rH,u.a8,u.dn,u.dk,u.$j,u.n5,Z.Hw,y.Nt,p.KE,p.hX,L.lW,o._Y,o.Fj,o.JJ,o.JL,o.Q7,o.sg,o.u],styles:[".example-card[_ngcontent-%COMP%]{width:500px}.card-container[_ngcontent-%COMP%]{margin-top:5rem;display:flex;justify-content:center;align-items:center}.signin-link-container[_ngcontent-%COMP%]{text-align:right;float:right;padding:5px 10px}"]}),e})();var J=r(5815),$=r(1377);const F=(0,a.Lq)({userId:null,error:null},(0,a.on)(A,e=>({...e,userId:null,error:null})),(0,a.on)(I,(e,{userId:s})=>({...e,userId:s,error:null})),(0,a.on)(x,(e,{error:s})=>({...e,userId:null,error:s})));var m=r(826),P=r(5577),T=r(4004),G=r(262),N=r(9646);let j=(()=>{class e{constructor(n,i,c){this.router=n,this.actions$=i,this.userManagementService=c,this.login$=(0,m.GW)(()=>this.actions$.pipe((0,m.l4)(v.x4),(0,P.z)(({username:f,password:h})=>this.userManagementService.login(f,h).pipe((0,T.U)(d=>(this.router.navigate(["/"]),(0,v.he)({username:d.user.username,userId:d.user._id,userRole:d.user.role,token:d.token}))),(0,G.K)(d=>(0,N.of)((0,v.UR)({error:d.message})))))))}}return e.\u0275fac=function(n){return new(n||e)(t.LFG(g.F0),t.LFG(m.eX),t.LFG(U))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac}),e})(),O=(()=>{class e{constructor(n,i){this.actions$=n,this.userManagementService=i,this.signup$=(0,m.GW)(()=>this.actions$.pipe((0,m.l4)(A),(0,P.z)(({username:c,password:f})=>this.userManagementService.signup(c,f).pipe((0,T.U)(h=>I({userId:h.user._id})),(0,G.K)(h=>(0,N.of)(x({error:h.message})))))))}}return e.\u0275fac=function(n){return new(n||e)(t.LFG(m.eX),t.LFG(U))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac}),e})();const H=[{path:"",redirectTo:"login",pathMatch:"full"},{path:"login",component:E},{path:"signup",component:Y}];let K=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[w.ez,g.Bz.forChild(H),u.QW,Z.Ps,y.c,L.ot,J.N6,p.lN,o.UX,a.Aw.forFeature("loginState",$.t),a.Aw.forFeature("signupState",F),m.sQ.forFeature([j,O])]}),e})()}}]);